#!/bin/bash

# nickmahda@gmail.com

cd "$(dirname "${BASH_SOURCE[0]}")" || exit 1
DIR=$(pwd)

git submodule update --init --recursive --remote --merge

#while getopts "c" o; do
#    case "$o" in
#        c) c=1;;
#    esac
#done

./lnfix -b

if [[ "$OSTYPE" == "darwin"* ]]; then
    if [[ -z "$(which brew)" ]]; then
        /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    fi

    brew bundle

elif [[ "$OSTYPE" == "linux"* ]]; then
    sudo apt update
    sudo apt install git pkg-config python3-pip tmux vim zsh
fi

echo "Done"

cd "$DIR" || exit
